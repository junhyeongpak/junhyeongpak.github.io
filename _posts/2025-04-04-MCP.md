---
layout: single
title: "MCP"


---

# MCP(Model Context Protocol)

---

AI기술 발전과 함께 AI 시스템이 외부 데이터와 효과적으로 연동되는 것이 중요해지는 실정이다.
기존의 AI 모델은 내부적인 데이터만을 기반으로 동작했으나, 실시간 동적 환경에서는 한계를 보였다. 이러한 문제점으로 인해, AI 시스템이 외부 데이터와 유동적으로 통신해 정보를 활용할 수 있는 새로운 프로토콜이 필요해지는 것이 자연스러운 흐름이 되었다.

Anthropic이 2024년 하반기에 Model Context Protocol을 오픈 소스로 공개하면서 AI 모델이 다양한 데이터 소스와 연결되어 실시간으로 정보를 주고받을 수 있게 되었다. 이를 활용하면 AI가 더 정확한 정보를 바탕으로 답변 혹은 작업을 진행할 수 있다. MCP의 등장은 AI 에이전트의 부상과 함께 비즈니스 시스템과 데이터를 AI 에이전트를 통합하여 동적 환경에서 보다 정확한 AI 시스템의 답변을 위한 통합적 구축을 용이하게 하였다.

---

## MCP란

MCP는 애플리케이션이 LLM에 컨텍스트(어떤 사건이나 정보, 말, 행동이 발생한 배경이나 상황)를 제공하는 방식을 표준화하는 개방형 프로토콜이다. MCP는 쉽게 설명하면 USB-C 포트와 같이 AI 모델을 다양한 데이터 소스 및 도구에 연결하는 표준화된 방식을 제공한다.

### MCP 특징

- 개방형 표준
- 양방향 연결
- 범용성과 표준화
- 데이터 보안

---

## MCP 구성요소

![img](https://blog.kakaocdn.net/dn/bILFMl/btsM224BOsd/lhMlVeHuw9bREu9IDFBUXK/img.png)

> 출처: https://datasciencebeehive.tistory.com/266

### 호스트

- AI 애플리케이션의 컨테이너이자 조정자 역할
- 여러 클라이언트의 인스턴스를 관리
- 클라이언트 연결 권한과 생명주기 제어
- 보안 정책과 동의 요구사항 등을 시행
- AI/LLM 통합 및 샘플링 조정
- 클라이언트 간 컨텍스트 집계 관리

### MCP 클라이언트

- 호스트에 의해 생성되며 서버와의 독립적인 연결 유지
- 서버당 하나의 상태 유지 세션 설정
- 프로토코 협상 및 기능 교환 처리
- 양방향으로 프로토콜 메시지를 라우팅
- 구독 및 알림을 관리
- 서버 간 보안 경계 유지

### MCP 서버

- 특화된 컨텍스트와 기능을 제공
- MCP 기본 요소를 통해 리소스, 도구 및 프롬프트를 노출
- 독립적으로 작동하며 특화된 작업(책임)을 가짐
- 클라이언트 인터페이스를 통해 샘플링을 요청
- 보안 제약 준수 필수
- 로컬 프로세스 또는 원격 서비스일 수 있음

---

## MCP 작동 방식

### 연결 설정

- 호스트 애플리케이션이 MCP 클라이언트 생성
- MCP 클라이언트가 MCP 서버와 연결 설정
- 연결 설정 과정에서 프로토콜 버전, 기능, 권한 등이 협상

### 컨텍스트 교환

- 서버는 클라이언트에게 데이터 소스의 컨텍스트 정보를 제공
- 클라이언트는 호스트 프로세스에게 위 컨텍스트 정보를 전달
- 호스트 프로세스는 여러 클라이언트로부터 받은 컨텍스트를 집계하여 AI 모델에 제공

### 도구 호출

- AI 모델은 특정 작업을 수행하기 위해 도구 호출을 요청할 수 있음
- 호스트 프로세스는 이 요청을 적절한 클라이언트에 전달함
- 클라이언트는 이 요청을 서버에 전송
- 서버는 요청된 작업을 수행하고 결과를 클라이언트에 반환

### 결과 처리

- 클라이언트는 서버로부터 받은 결과를 호스트 프로세스에 전달
- 호스트 프로세스는 받은 결과를 AI 모델에 제공
- AI 모델은 해당 결과를 바탕으로 응답 생성

---

## MCP 구현

python에서는 fastmcp라는 라이브러리를 통해 간단하게 MCP 서버를 구현할 수 있음

---

### 기존 API 및 함수 호출 한계

- 개별 통합의 필요성: 각 데이터 소스마다 별도의 API 연결읠 설정하고 관리해야 한다.
- 단방향 통신: AI가 데이터를 요청하면 서버가 한 번 응답하고 끝나는 방식으로 지속적인 상호작용이 어려웠다
- 개발자 중심 설계: 기술적 지식이 없으면 활용이 어렵다.
- 확장성 제한: 여러 데이터 소스를 통합할수록 복잡성이 급격히 증가함
- 컨텍스트 유지의 어려움: 여러 시스템 간 컨텍스트 유지가 어려워서 일관성 유지가 힘듦

### MCP의 차별화된 특징

- 표준화된 프로토콜: MCP는 모든 데이터 소스와 도구에 대한 단일 표준 프로토콜 제공
- 양방향 통신: AI 모델과 데이터 소스 간 양방향 통신을 지원하여 더 복잡하고 상호작용적인 작업이 가능
- 사용자 친화적 설계: 기술적 지식이 없어도 쉽게 활용 가능
- 확장성 향상: 표준화된 프로토콜로 여러 데이터 소스와 도구를 쉽게 통합할 수 있어, 확장성이 용이함
- 컨텍스트 유지: MCP는 여러 시스템 간 컨텍스트를 유지할 수 있어, AI가 다양한 도구와 데이터 소스를 오가며 작업할 때도 일관석 유지가 가능

